{{- $pctx := . -}}
{{- if .IsHome -}}
{{ $pctx = .Site }}
{{- end -}}

{{- $pages := slice }}

{{- if .IsHome -}}
{{- $pages = $pctx.RegularPages -}}
{{- else if .IsSection -}}
{{- $pages = $pctx.RegularPagesRecursive -}}
{{- else -}}
{{- $pages = $pctx.Pages -}}
{{- end -}}

{{- return partial "functions/filterpages.html" $pages }}

